import{u as B}from"./common.min.js";class D{constructor(t){let s={logging:!0};this.config=Object.assign(s,t),this.observer,document.documentElement.hasAttribute("data-fls-watch")||this.scrollWatcherRun()}scrollWatcherUpdate(){this.scrollWatcherRun()}scrollWatcherRun(){document.documentElement.setAttribute("data-fls-watch",""),this.scrollWatcherConstructor(document.querySelectorAll("[data-fls-watcher]"))}scrollWatcherConstructor(t){t.length&&B(Array.from(t).map(function(r){if(r.dataset.flsWatcher==="navigator"&&!r.dataset.flsWatcherThreshold){let i;r.clientHeight>2?(i=window.innerHeight/2/(r.clientHeight-1),i>1&&(i=1)):i=1,r.setAttribute("data-fls-watcher-threshold",i.toFixed(2))}return`${r.dataset.flsWatcherRoot?r.dataset.flsWatcherRoot:null}|${r.dataset.flsWatcherMargin?r.dataset.flsWatcherMargin:"0px"}|${r.dataset.flsWatcherThreshold?r.dataset.flsWatcherThreshold:0}`})).forEach(r=>{let i=r.split("|"),w={root:i[0],margin:i[1],threshold:i[2]},y=Array.from(t).filter(function(e){let o=e.dataset.flsWatcherRoot?e.dataset.flsWatcherRoot:null,c=e.dataset.flsWatcherMargin?e.dataset.flsWatcherMargin:"0px",m=e.dataset.flsWatcherThreshold?e.dataset.flsWatcherThreshold:0;if(String(o)===w.root&&String(c)===w.margin&&String(m)===w.threshold)return e}),n=this.getScrollWatcherConfig(w);this.scrollWatcherInit(y,n)})}getScrollWatcherConfig(t){let s={};if(document.querySelector(t.root)?s.root=document.querySelector(t.root):t.root,s.rootMargin=t.margin,!(t.margin.indexOf("px")<0&&t.margin.indexOf("%")<0)){if(t.threshold==="prx"){t.threshold=[];for(let r=0;r<=1;r+=.005)t.threshold.push(r)}else t.threshold=t.threshold.split(",");return s.threshold=t.threshold,s}}scrollWatcherCreate(t){this.observer=new IntersectionObserver((s,r)=>{s.forEach(i=>{this.scrollWatcherCallback(i,r)})},t)}scrollWatcherInit(t,s){this.scrollWatcherCreate(s),t.forEach(r=>this.observer.observe(r))}scrollWatcherIntersecting(t,s){t.isIntersecting?s.classList.contains("--watcher-view")||s.classList.add("--watcher-view"):s.classList.contains("--watcher-view")&&s.classList.remove("--watcher-view")}scrollWatcherOff(t,s){s.unobserve(t)}scrollWatcherCallback(t,s){const r=t.target;this.scrollWatcherIntersecting(t,r),r.hasAttribute("data-fls-watcher-once")&&t.isIntersecting&&this.scrollWatcherOff(r,s),document.dispatchEvent(new CustomEvent("watcherCallback",{detail:{entry:t}}))}}document.querySelector("[data-fls-watcher]")&&window.addEventListener("load",()=>new D({}));const V=()=>{const x=document.querySelectorAll("[data-fls-marquee]"),t={inner:"data-fls-marquee-inner",item:"data-fls-marquee-item"};if(!x.length)return;const{head:s}=document,r=(n,e)=>{let o;return(...c)=>{o&&clearTimeout(o),o=setTimeout(()=>{e(...c),o=null},n)}},i=n=>{if(!n&&!isFunction(n))return;let e=0;const o=()=>{const c=window.innerWidth;e!==c&&(e=c,n())};window.addEventListener("resize",r(50,o)),o()},w=n=>{if(!n)return;const e=n,o=e.children;if(!o.length)return;Array.from(o).forEach(m=>m.setAttribute(t.item,""));const c=`<div ${t.inner}>${e.innerHTML}</div>`;e.innerHTML=c},y=(n,e)=>e?n.offsetHeight:n.offsetWidth;x.forEach(n=>{if(!n)return;w(n);const e=n.firstElementChild;let o=[];if(!e)return;const c=parseFloat(n.getAttribute("data-fls-marquee-space")),m=n.querySelectorAll(`[${t.item}]`),T=parseFloat(n.getAttribute("data-fls-marquee-speed"))/10||100,R=n.hasAttribute("data-fls-marquee-pause"),E=n.getAttribute("data-fls-marquee-direction"),h=E==="bottom"||E==="top",S=`marqueeAnimation-${Math.floor(Math.random()*1e7)}`;let v=parseFloat(window.getComputedStyle(m[0])?.getPropertyValue("margin-right")),f=v||(isNaN(c)?30:c),p=parseFloat(n.getAttribute("data-fls-marquee-start"))||0,b=0,u=0,L=0,I=e.children.length,W=0,q=0;const P=()=>{p&&e.addEventListener("animationiteration",$),R&&(e.removeEventListener("mouseenter",A),e.removeEventListener("mouseleave",A),e.addEventListener("mouseenter",A),e.addEventListener("mouseleave",A))},$=()=>{p=0,e.removeEventListener("animationiteration",$),M()},z=a=>{let l="display: flex; flex-wrap: nowrap;";h?(l+=`
				flex-direction: column;
				position: relative;
				will-change: transform;`,E==="bottom"&&(l+=`top: -${a}px;`)):(l+=`
				position: relative;
				will-change: transform;`,E==="right"&&(l+=`inset-inline-start: -${a}px;;`)),e.style.cssText=l},F=a=>{switch(E){case"right":case"bottom":return a;default:return-a}},H=()=>{const a=`@keyframes ${S} {
					 0% {
						 transform: translate${h?"Y":"X"}(${!h&&window.stateRtl?-p:p}%);
					 }
					 100% {
						 transform: translate${h?"Y":"X"}(${F(!h&&window.stateRtl?-u:u)}px);
					 }
				 }`,l=document.createElement("style");l.classList.add(S),l.innerHTML=a,s.append(l),e.style.animation=`${S} ${(u+p*u/100)/T}s infinite linear`},N=()=>{b=u=L=q=W=0;const a=y(n,h);let l=Array.from(e.children);if(!l.length)return;o.length?l=[...o]:o=l.map(d=>d),e.style.display="flex",h&&(e.style.flexDirection="column"),e.innerHTML="",l.forEach(d=>{e.append(d)}),l.forEach(d=>{h?d.style.marginBottom=`${f}px`:(d.style.marginRight=`${f}px`,d.style.flexShrink=0);const g=y(d,h);return b+=g+f,u+=g+f,L+=g+f,q+=1,g});const C=a*2+L;for(;b<C;W+=1){l[W]||(W=0);const d=l[W].cloneNode(!0),g=e.children[W];e.append(d),b+=y(g,h)+f,(u<a||q%I!==0)&&(q+=1,u+=y(g,h)+f)}z(u)},O=()=>{v&&(m.forEach(a=>a.style.removeProperty("margin-right")),v=parseFloat(window.getComputedStyle(m[0]).getPropertyValue("margin-right")),f=v||(isNaN(c)?30:c))},k=()=>{O(),N(),H(),P()},M=()=>{s.querySelector(`.${S}`)?.remove(),k()},A=a=>{const{type:l,target:C}=a;C.style.animationPlayState=l==="mouseenter"?"paused":"running"};i(M)})};V();
